:root {
    /* New Vibrant "Synthwave/Cyberpunk" Color Palette */
    --console-bg: #1a1a2e; /* Darkest Blue/Purple */
    --console-darker-bg: #10101f; /* Even Darker Variant */
    --screen-bg: #0f0f18; /* Near Black for Screen */
    --screen-bezel: #2c2c44; /* Slightly Lighter Blue/Purple */
    
    --button-main-color: #e94560; /* Vibrant Pink/Red (for main actions like Start/Restart) */
    --button-main-press-color: #c7304a;
    --button-dpad-color: #3b3b58; /* Darker purple/blue for D-Pad */
    --button-dpad-press-color: #2a2a40;
    --dpad-arrow-color: var(--accent-color);

    --text-color: #f0f0f0; /* Off-White */
    --accent-color: #00f5d4; /* Bright Cyan/Teal - for titles, UI accents */
    --pixel-font: 'Press Start 2P', cursive;

    /* Racer specific colors - Adapting to the new theme */
    --road-color: #222233; /* Dark bluish gray Road */
    --lane-marker-color: #555577; /* Muted bluish gray Lane Markers */
    --rumble-strip-color-1: var(--button-main-color); /* Pink/Red from buttons */
    --rumble-strip-color-2: var(--text-color); /* Off-white from text */
    
    --player-car-body-color: var(--accent-color); /* Teal Player Car */
    --player-car-window-color: var(--console-darker-bg); /* Dark windows */
    --player-car-lights-color: #ffffff;

    --obstacle-car-body-color-1: #ff8c00; /* Dark Orange */
    --obstacle-car-body-color-2: #9d00ff; /* Purple */
    --obstacle-car-body-color-3: #e0e0e0; /* Light Gray/White */
    --obstacle-car-window-color: #181818;

    --grass-color: #111122; /* Very dark, almost part of the abyss/night feel */
    --sky-color: var(--console-bg); /* Same as console for a more abstract/night sky */
}

body {
    margin: 0;
    font-family: var(--pixel-font), sans-serif;
    background: linear-gradient(160deg, #0f0f18 0%, #1a1a2e 30%, #2c2c44 70%, #1a1a2e 100%);
    background-size: 400% 400%; /* For animation */
    animation: cosmicShift 45s ease-in-out infinite alternate;
    display: flex; justify-content: center; align-items: center;
    min-height: 100vh; overflow: hidden;
    color: var(--text-color); position: relative;
}

@keyframes cosmicShift {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}

#particles-js-racer {
    position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: 0; pointer-events: none;
}

.background-decor-racer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    overflow: hidden; z-index: 1; pointer-events: none;
}
.decor-grid-pattern {
    position: absolute;
    top: 50%; /* Start from horizon */
    left: 0;
    width: 100%;
    height: 50%; /* Cover bottom half */
    background-image:
        repeating-linear-gradient(var(--accent-color) 0 1px, transparent 1px 100%),
        repeating-linear-gradient(90deg, var(--accent-color) 0 1px, transparent 1px 100%);
    background-size: 50px 50px; /* Grid cell size */
    opacity: 0.03;
    transform: perspective(300px) rotateX(45deg) scale(1.5);
    transform-origin: 50% 0;
    animation: scrollGrid 20s linear infinite;
}
@keyframes scrollGrid {
    from { background-position-y: 0; }
    to { background-position-y: -50px; } /* Scroll one grid cell */
}

.decor-glow {
    position: absolute;
    border-radius: 50%;
    opacity: 0.15;
    pointer-events: none;
    filter: blur(100px); /* Creates a very soft glow */
}
.top-left-glow {
    width: 500px; height: 500px;
    top: -150px; left: -150px;
    background: radial-gradient(circle, var(--button-main-color) 0%, transparent 70%);
}
.bottom-right-glow {
    width: 600px; height: 600px;
    bottom: -200px; right: -200px;
    background: radial-gradient(circle, var(--accent-color) 0%, transparent 70%);
}


.game-console.large-console.racer-console {
    width: 700px;
    min-height: 850px; /* Increased height for longer track feel */
    padding: 25px; /* Slightly reduced padding */
    border-width: 3px;
    position: relative; z-index: 2; background-color: var(--console-bg); border-radius: 25px; /* Softer radius */
    box-shadow: 0 20px 40px rgba(0,0,0,0.4), inset 0 0 15px rgba(255,255,255,0.03), inset 0 5px 12px rgba(0,0,0,0.25);
    display: flex; flex-direction: column;
    border-style: solid; border-color: var(--console-darker-bg);
    font-family: var(--pixel-font), sans-serif;
}

.console-top {
    width: 100%;
    margin-bottom: 20px;
    text-align: center;
}

.brand { font-size: 2em; color: var(--accent-color); text-shadow: 0 0 5px var(--accent-color), 0 0 10px var(--accent-color), 2px 2px 2px #000; }

.console-screen-area.racer-layout {
    display: flex;
    width: 100%;
    align-items: stretch;
    gap: 15px; /* Reduced gap */
    flex-grow: 1;
    min-height: 0;
}

.game-screen-bezel.large-bezel {
    background-color: var(--screen-bezel);
    padding: 8px; /* Reduced padding */
    border-radius: 6px; /* Softer radius */
    box-shadow: inset 0 0 8px rgba(0,0,0,0.6);
    flex: 1;
    display: flex;
    min-width: 0;
}

.game-screen.large-screen {
    background-color: var(--screen-bg);
    position: relative;
    border: 2px solid var(--console-darker-bg);
    overflow: hidden;
    display: flex; justify-content: center; align-items: center;
    flex: 1;
    border-radius: 4px;
}

#racerCanvas {
    display: block;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    max-width: 100%;
    max-height: 100%;
}

.info-panel.info-panel-racer.large-info-panel {
    flex-grow: 0;
    flex-shrink: 0;
    width: 170px; 
    display: flex; flex-direction: column; justify-content: space-around; /* Better spacing */
    padding: 15px 12px;
    background-color: var(--console-darker-bg); border-radius: 6px;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5); text-align: center;
    font-family: var(--pixel-font), sans-serif; border: 2px solid #101018;
}

.info-section { margin-bottom: 0; } /* Removed default margin, using space-around */
.info-section h4 {
    margin: 0 0 6px 0;
    font-size: 0.8em;
    color: var(--accent-color);
    text-transform: uppercase;
    letter-spacing: 1px;
}
.info-section p {
    margin: 0;
    font-size: 1.1em;
    color: var(--text-color);
    line-height: 1.2; background-color: var(--screen-bg);
    padding: 7px 8px;
    border-radius: 3px; display: block;
    border: 1px solid var(--screen-bezel);
}

.game-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(15, 15, 24, 0.92); /* Darker overlay, matches screen-bg */
    display: flex; flex-direction: column;
    justify-content: center; align-items: center; color: white; text-align: center;
    padding: 20px; box-sizing: border-box; z-index: 10;
    font-family: var(--pixel-font), sans-serif;
}
.message-content {
    background-color: var(--console-darker-bg);
    border: 2px solid var(--accent-color);
    padding: 25px 30px;
    border-radius: 4px; 
    box-shadow: 0 0 15px var(--accent-color), inset 0 0 10px rgba(0, 245, 212, 0.2);
}
.game-overlay p { font-size: 1.2em; margin-top: 0; margin-bottom: 18px; line-height: 1.5; color: var(--text-color);}
.game-overlay p.controls-hint { font-size: 0.75em; color: var(--lane-marker-color); margin-bottom: 22px;}
.game-overlay button {
    padding: 12px 25px; font-family: var(--pixel-font); background-color: var(--button-main-color);
    color: var(--text-color); border: none; border-radius: 3px; cursor: pointer; font-size: 1em;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
    box-shadow: 0 3px 0px var(--button-main-press-color), 0 0 8px rgba(233, 69, 96, 0.5);
    transition: all 0.1s ease-out;
}
.game-overlay button:hover { background-color: #f05570; box-shadow: 0 3px 0px var(--button-main-press-color), 0 0 12px rgba(233, 69, 96, 0.7); }
.game-overlay button:active { transform: translateY(2px); box-shadow: 0 1px 0px var(--button-main-press-color), 0 0 5px rgba(233, 69, 96, 0.4); }


.console-controls.racer-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    padding: 0 20px;
    box-sizing: border-box;
    margin-top: 20px;
}
.d-pad.racer-dpad {
    position: relative;
    width: 140px; 
    height: 54px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.control-button.dpad-button { 
    background-color: var(--button-dpad-color);
    width: 54px; height: 54px; 
    border: 1px solid var(--console-darker-bg); cursor: pointer;
    box-shadow: 0 3px 0px var(--button-dpad-press-color), inset 0 0 5px rgba(0,0,0,0.3);
    transition: all 0.1s ease-out;
    display: flex; align-items: center; justify-content: center;
    border-radius: 6px;
}
.control-button.dpad-button:active {
    background-color: var(--button-dpad-press-color);
    transform: translateY(2px);
    box-shadow: 0 1px 0px var(--button-dpad-press-color), inset 0 0 3px rgba(0,0,0,0.2);
}

.control-button.dpad-button::before { 
    content: ''; position: absolute; width: 0; height: 0; border-style: solid;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
}
.control-button.dpad-button.left::before {
    border-width: 8px 12px 8px 0; 
    border-color: transparent var(--dpad-arrow-color) transparent transparent;
}
.control-button.dpad-button.right::before {
    border-width: 8px 0 8px 12px; 
    border-color: transparent transparent transparent var(--dpad-arrow-color);
}

.action-buttons { display: flex; gap: 15px; margin-left: 30px; } /* If you add other main action buttons */
.action-button.main-action-button {
    background-color: var(--button-main-color);
    color: var(--text-color);
    padding: 10px 18px;
    font-size: 0.9em;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
    box-shadow: 0 3px 0px var(--button-main-press-color), 0 0 8px rgba(233, 69, 96, 0.5);
}
.action-button.main-action-button:hover { background-color: #f05570; }
.action-button.main-action-button:active { transform: translateY(2px); box-shadow: 0 1px 0px var(--button-main-press-color); }


.console-bottom {
    width: 100%;
    margin-top: 20px;
    display: flex;
    justify-content: center;
}
.speaker-grill { display: flex; gap: 6px; }
.speaker-grill span {
    width: 10px; height: 36px; background-color: var(--console-darker-bg);
    border-radius: 2px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.6);
}