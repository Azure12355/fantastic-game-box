:root {
    --console-bg: #bdbdbd; /* Classic computer grey */
    --console-darker-bg: #9e9e9e;
    --screen-bg: #c0c0c0; /* Lighter grey screen */
    --screen-bezel: #757575;
    --button-color: #a0a0a0;
    --button-press-color: #888888;
    --text-color: #212121; /* Dark text for console */
    --accent-color: #0D47A1; /* Deep blue accent */
    --pixel-font: 'Press Start 2P', cursive;

    --cell-border: #7b7b7b;
    --cell-hidden-bg: #bdbdbd;
    --cell-revealed-bg: #d0d0d0; /* Slightly different shade for revealed */
    --cell-mine-bg: #ff4d4d; /* Red for mine */
    --cell-flag-color: #b71c1c; /* Dark red flag */
    --cell-mine-color: #111; /* Mine icon color */

    /* Number Colors */
    --num-1: #01579b; /* Blue */
    --num-2: #00796b; /* Green */
    --num-3: #d32f2f; /* Red */
    --num-4: #512da8; /* Purple */
    --num-5: #bf360c; /* Brown/Orange */
    --num-6: #00bcd4; /* Cyan */
    --num-7: #212121; /* Black */
    --num-8: #757575; /* Grey */
}

body {
    margin: 0;
    font-family: var(--pixel-font), sans-serif;
    background: linear-gradient(45deg, #e0e0e0, #f5f5f5, #e0e0e0); /* Subtle grey gradient */
    background-size: 300% 300%;
    animation: subtleGrayShift 40s ease infinite alternate;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow: hidden;
    color: var(--text-color);
    position: relative;
}

@keyframes subtleGrayShift {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

/* --- 背景装饰 --- */
.background-decor { /* ... (样式和之前类似，可自定义) ... */
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    overflow: hidden; z-index: 1; pointer-events: none;
}
.decor-shape { position: absolute; opacity: 0.1; }
.shape-pixel { width: 20px; height: 20px; background-color: var(--console-darker-bg); }
.p1 { top: 10%; left: 15%; animation: floatPixel 15s infinite alternate; }
.p2 { top: 70%; left: 85%; animation: floatPixel 20s infinite alternate-reverse .5s; width: 30px; height: 30px; }
.p3 { top: 40%; left: 5%; animation: floatPixel 18s infinite alternate 1s; width: 15px; height: 15px;}
.shape-gear { font-size: 50px; color: var(--console-darker-bg); }
.g1 { top: 80%; left: 20%; animation: spinGear 25s linear infinite; }
.g2 { top: 20%; left: 75%; animation: spinGear 30s linear infinite reverse; font-size: 70px; opacity: 0.08;}

@keyframes floatPixel {
    0% { transform: translateY(0px) rotate(0deg); }
    100% { transform: translateY(-20px) rotate(90deg); }
}
@keyframes spinGear {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* --- 游戏机主体 --- */
.game-console {
    position: relative; z-index: 2; background-color: var(--console-bg); border-radius: 20px;
    padding: 25px; box-shadow: 0 15px 30px rgba(0,0,0,0.3), inset 0 0 10px rgba(255,255,255,0.1), inset 0 5px 10px rgba(0,0,0,0.15);
    width: auto; /* Auto width based on content */ max-width: 90vw; /* Max width */
    display: flex; flex-direction: column; align-items: center; border: 3px solid var(--console-darker-bg);
    font-family: var(--pixel-font), sans-serif;
}
.console-top { width: 100%; margin-bottom: 15px; text-align: center; }
.brand { font-size: 1.5em; color: var(--accent-color); text-shadow: 1px 1px 0px var(--console-darker-bg); }
.console-screen-area.minesweeper-layout { /* Specific layout for minesweeper */
    display: flex; width: 100%; margin-bottom: 20px; align-items: flex-start; /* Align items top */
    gap: 20px; /* Gap between screen and info panel */
}
.game-screen-bezel { background-color: var(--screen-bezel); padding: 10px; border-radius: 8px; box-shadow: inset 0 0 8px rgba(0,0,0,0.4); }

.game-screen {
    background-color: var(--screen-bg); position: relative;
    border: 2px solid #616161; /* Inner darker border */
    overflow: hidden; /* Prevents grid overflow */
    /* Width/Height set by grid content */
    padding: 5px; /* Padding around the grid */
    display: inline-block; /* Fit content */
}

/* --- 扫雷网格 --- */
.mine-grid {
    display: grid;
    /* Grid columns set by JS */
    border-collapse: collapse; /* Optional: visual style */
}

.cell {
    width: 24px; /* 像素格子大小 */
    height: 24px;
    border: 1px solid var(--cell-border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px; /* Number font size */
    font-weight: bold;
    cursor: pointer;
    user-select: none; /* Prevent text selection */
    background-color: var(--cell-hidden-bg);
    /* Pixelated "raised" effect for hidden cells */
    box-shadow: inset 2px 2px 0px rgba(255,255,255,0.3),
                inset -2px -2px 0px rgba(0,0,0,0.2);
    transition: background-color 0.1s ease, box-shadow 0.1s ease;
}

.cell.hidden:hover {
    background-color: #cfcfcf; /* Slightly lighter on hover */
}
.cell.hidden:active {
     background-color: #aaa; /* Darker when pressed */
     box-shadow: inset -2px -2px 0px rgba(255,255,255,0.3),
                 inset 2px 2px 0px rgba(0,0,0,0.2); /* Inverted shadow */
}

.cell.revealed {
    background-color: var(--cell-revealed-bg);
    box-shadow: none; /* Flat appearance */
    border-width: 1px;
    border-color: var(--cell-border);
    cursor: default;
}

.cell.mine {
    background-color: var(--cell-mine-bg);
    color: var(--cell-mine-color);
    font-size: 16px; /* Make mine icon slightly larger */
}
.cell.flagged {
    /* background-color: var(--cell-hidden-bg); */ /* Keep raised look */
    color: var(--cell-flag-color);
    font-size: 16px; /* Flag icon size */
    box-shadow: inset 2px 2px 0px rgba(255,255,255,0.3),
                inset -2px -2px 0px rgba(0,0,0,0.2);
}
.cell.incorrect-flag { /* When game over, show incorrectly placed flags */
     background-color: #ffcdd2; /* Light red background */
     /* Keep flag icon, maybe add cross mark? */
}


/* 数字颜色 */
.cell.num-1 { color: var(--num-1); }
.cell.num-2 { color: var(--num-2); }
.cell.num-3 { color: var(--num-3); }
.cell.num-4 { color: var(--num-4); }
.cell.num-5 { color: var(--num-5); }
.cell.num-6 { color: var(--num-6); }
.cell.num-7 { color: var(--num-7); }
.cell.num-8 { color: var(--num-8); }

/* --- 信息面板 --- */
.info-panel.info-panel-minesweeper { /* Specific styles for minesweeper */
    flex-grow: 0; /* Don't grow, fixed width based on content */
    width: 150px; /* Fixed width */
    display: flex; flex-direction: column; justify-content: flex-start; /* Align top */
    padding: 15px; background-color: var(--console-darker-bg); border-radius: 8px;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.3); text-align: center;
    font-family: var(--pixel-font), sans-serif;
}
.info-section { margin-bottom: 15px; }
.info-section:last-child { margin-bottom: 0; }
.info-section h4 { margin: 0 0 5px 0; font-size: 0.75em; color: var(--accent-color); text-transform: uppercase; display: flex; align-items: center; justify-content: center; gap: 5px;}
.info-section p { margin: 0; font-size: 1.2em; /* Larger numbers */ color: var(--text-color); line-height: 1.1; background-color: #333; padding: 3px 5px; border-radius: 3px; display: inline-block; min-width: 40px;}
.info-section select, .info-section button.info-button {
    font-family: var(--pixel-font);
    font-size: 0.7em;
    padding: 5px;
    border: 1px solid var(--cell-border);
    background-color: var(--cell-hidden-bg);
    color: var(--text-color);
    border-radius: 3px;
    margin-top: 5px;
    width: 100%; /* Make select/button full width */
    box-sizing: border-box; /* Include padding/border in width */
}
.info-section button.info-button {
    cursor: pointer; background-color: var(--accent-color); color: white;
    box-shadow: 0 2px 0px darken(var(--accent-color), 15%);
}
.info-section button.info-button:active { transform: translateY(1px); box-shadow: 0 1px 0px darken(var(--accent-color), 15%);}


/* --- 游戏覆盖层 --- */
.game-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.7); display: flex; flex-direction: column;
    justify-content: center; align-items: center; color: white; text-align: center;
    padding: 20px; box-sizing: border-box; z-index: 10;
    font-family: var(--pixel-font), sans-serif;
}
.message-content { background-color: var(--console-darker-bg); padding: 20px 25px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.game-overlay p { font-size: 1.1em; margin-top: 0; margin-bottom: 15px; line-height: 1.4;}
.game-overlay button {
    padding: 10px 20px; font-family: var(--pixel-font); background-color: var(--accent-color);
    color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9em;
    box-shadow: 0 3px 0px darken(var(--accent-color), 15%);
    transition: background-color 0.1s, transform 0.1s, box-shadow 0.1s;
}
.game-overlay button:hover { background-color: lighten(var(--accent-color), 10%); }
.game-overlay button:active { transform: translateY(2px); box-shadow: 0 1px 0px darken(var(--accent-color), 15%); }

/* --- 控制器 (简化) --- */
.console-controls.simplified-controls {
    width: 100%; padding: 10px 20px; box-sizing: border-box; margin-top: 10px;
    text-align: center; color: var(--text-color); font-size: 0.7em;
    background: var(--console-darker-bg); border-radius: 5px;
}

/* --- 底部装饰 --- */
.console-bottom { width: 100%; margin-top: 20px; display: flex; justify-content: center; }
.speaker-grill { display: flex; gap: 6px; }
.speaker-grill span { width: 10px; height: 35px; background-color: var(--console-darker-bg); border-radius: 3px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.4); }

/* 辅助函数占位符 (需要手动替换颜色值) */
/* darken(#0D47A1, 15%) -> approx #09317a */
/* lighten(#0D47A1, 10%) -> approx #0f52ba */